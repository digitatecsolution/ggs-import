<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>GGS Admin Panel â€” Backend Dashboard</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700;900&family=DM+Sans:wght@300;400;500;600;700&family=Space+Grotesk:wght@500;600;700&display=swap" rel="stylesheet">
<style>
*,*::before,*::after{box-sizing:border-box;margin:0;padding:0}
:root{
  --bg:#07080A;--surface:#0E1013;--card:#141618;--card2:#1A1C1F;
  --border:rgba(255,255,255,0.07);--gold:#C8961E;--gold-light:#F2B93B;
  --white:#F5F2EC;--muted:#6B6B73;--muted2:#9A9AA4;
  --green:#16A34A;--green-light:#22C55E;--red:#DC2626;--blue:#3B82F6;
  --r:10px;
}
body{background:var(--bg);color:var(--white);font-family:'DM Sans',sans-serif;display:flex;min-height:100vh}

/* ===== LOGIN ===== */
.login-screen{position:fixed;inset:0;background:var(--bg);display:grid;place-items:center;z-index:9999;transition:opacity .4s}
.login-screen.hidden{opacity:0;pointer-events:none}
.login-box{background:var(--card);border:1px solid rgba(200,150,30,.22);border-radius:20px;padding:48px;max-width:400px;width:90%;text-align:center;position:relative;overflow:hidden}
.login-box::before{content:'';position:absolute;top:0;inset-inline:0;height:3px;background:linear-gradient(90deg,transparent,var(--gold),var(--gold-light),var(--gold),transparent)}
.login-logo{font-family:'Playfair Display';font-size:1.5rem;font-weight:900;margin-bottom:4px}
.login-logo em{color:var(--gold-light);font-style:normal}
.login-sub{font-size:.72rem;color:var(--muted2);letter-spacing:.12em;text-transform:uppercase;margin-bottom:32px}
.login-field{display:flex;flex-direction:column;gap:6px;margin-bottom:14px;text-align:left}
.login-field label{font-size:.68rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(245,242,236,.4)}
.login-field input{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;padding:13px 15px;color:var(--white);font-family:'DM Sans';font-size:.88rem;outline:none;transition:.2s;width:100%}
.login-field input:focus{border-color:rgba(200,150,30,.4)}
.login-btn{width:100%;padding:15px;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:var(--bg);font-weight:800;font-size:.95rem;border-radius:10px;border:none;cursor:pointer;font-family:'DM Sans';transition:.3s;margin-top:6px}
.login-btn:hover{transform:translateY(-2px);box-shadow:0 10px 30px rgba(200,150,30,.35)}
.login-err{font-size:.75rem;color:#f87171;margin-top:8px;display:none}

/* ===== SIDEBAR ===== */
.sidebar{width:240px;background:var(--surface);border-right:1px solid var(--border);display:flex;flex-direction:column;flex-shrink:0;height:100vh;position:sticky;top:0;overflow-y:auto}
.sb-brand{padding:24px 20px;border-bottom:1px solid var(--border)}
.sb-brand .name{font-family:'Playfair Display';font-size:1.1rem;font-weight:900}
.sb-brand .name em{color:var(--gold-light);font-style:normal}
.sb-brand .tag{font-size:.6rem;color:var(--muted);letter-spacing:.13em;text-transform:uppercase;margin-top:2px;display:block}
.sb-nav{flex:1;padding:16px 12px}
.sb-section{font-size:.6rem;letter-spacing:.16em;text-transform:uppercase;color:var(--muted);font-weight:700;padding:14px 8px 6px;margin-top:4px}
.sb-link{display:flex;align-items:center;gap:10px;padding:10px 12px;border-radius:8px;cursor:pointer;font-size:.85rem;font-weight:500;color:rgba(245,242,236,.5);transition:.2s;text-decoration:none;border:none;background:none;width:100%;text-align:left;font-family:'DM Sans'}
.sb-link:hover{background:rgba(255,255,255,.05);color:var(--white)}
.sb-link.active{background:rgba(200,150,30,.1);color:var(--gold-light);font-weight:600}
.sb-link span{font-size:1rem;flex-shrink:0}
.sb-footer{padding:16px 12px;border-top:1px solid var(--border)}
.sb-footer a{display:flex;align-items:center;gap:8px;font-size:.8rem;color:rgba(245,242,236,.35);text-decoration:none;transition:.2s;padding:8px 12px;border-radius:7px}
.sb-footer a:hover{color:var(--white);background:rgba(255,255,255,.04)}

/* ===== MAIN ===== */
.main{flex:1;overflow-x:hidden;overflow-y:auto;max-height:100vh}
.topbar{background:var(--surface);border-bottom:1px solid var(--border);padding:18px 28px;display:flex;align-items:center;justify-content:space-between;gap:16px;position:sticky;top:0;z-index:100}
.topbar h1{font-family:'Playfair Display';font-size:1.4rem;font-weight:900}
.topbar h1 em{color:var(--gold-light);font-style:normal}
.tb-actions{display:flex;align-items:center;gap:10px}
.tb-btn{display:flex;align-items:center;gap:7px;padding:9px 18px;border-radius:9px;font-size:.82rem;font-weight:600;cursor:pointer;border:none;font-family:'DM Sans';transition:.25s}
.tb-btn-primary{background:linear-gradient(135deg,var(--gold),var(--gold-light));color:var(--bg)}
.tb-btn-primary:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(200,150,30,.35)}
.tb-btn-ghost{background:rgba(255,255,255,.05);border:1px solid var(--border);color:var(--muted2)}
.tb-btn-ghost:hover{color:var(--white);background:rgba(255,255,255,.08)}
.content{padding:28px;display:flex;flex-direction:column;gap:24px}

/* ===== PAGE VIEWS ===== */
.page{display:none}
.page.active{display:flex;flex-direction:column;gap:24px}

/* ===== STAT CARDS ===== */
.stat-row{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:14px}
.stat-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:22px;position:relative;overflow:hidden;transition:.3s}
.stat-card:hover{border-color:rgba(200,150,30,.2)}
.stat-card::before{content:'';position:absolute;top:0;inset-inline:0;height:2px;background:linear-gradient(90deg,transparent,var(--gold),transparent)}
.sc-icon{font-size:1.6rem;display:block;margin-bottom:10px}
.sc-val{font-family:'Playfair Display';font-size:2rem;font-weight:900;color:var(--gold-light);line-height:1;margin-bottom:4px}
.sc-label{font-size:.72rem;color:var(--muted2);letter-spacing:.1em;text-transform:uppercase}
.sc-trend{font-size:.72rem;color:var(--green-light);margin-top:4px}

/* ===== TABLE ===== */
.table-wrap{background:var(--card);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.table-head{padding:18px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between;gap:12px;flex-wrap:wrap}
.table-head h3{font-size:.95rem;font-weight:700}
.t-search{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;padding:9px 14px;color:var(--white);font-family:'DM Sans';font-size:.82rem;outline:none;width:220px;transition:.2s}
.t-search:focus{border-color:rgba(200,150,30,.35)}
.t-search::placeholder{color:var(--muted)}
table{width:100%;border-collapse:collapse}
th{padding:12px 16px;text-align:left;font-size:.67rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);font-weight:700;border-bottom:1px solid var(--border);background:rgba(255,255,255,.02)}
td{padding:14px 16px;font-size:.83rem;border-bottom:1px solid rgba(255,255,255,.04)}
tr:last-child td{border-bottom:none}
tr:hover td{background:rgba(255,255,255,.02)}
.badge{display:inline-flex;padding:3px 9px;border-radius:5px;font-size:.67rem;font-weight:700;letter-spacing:.08em;text-transform:uppercase}
.badge-green{background:rgba(22,163,74,.15);color:#4ade80;border:1px solid rgba(22,163,74,.25)}
.badge-gold{background:rgba(200,150,30,.12);color:var(--gold-light);border:1px solid rgba(200,150,30,.2)}
.badge-red{background:rgba(220,38,38,.12);color:#f87171;border:1px solid rgba(220,38,38,.2)}
.badge-blue{background:rgba(59,130,246,.12);color:#93c5fd;border:1px solid rgba(59,130,246,.2)}
.act-btn{background:none;border:1px solid var(--border);border-radius:6px;padding:5px 10px;color:var(--muted2);font-size:.72rem;cursor:pointer;font-family:'DM Sans';transition:.2s}
.act-btn:hover{border-color:var(--gold);color:var(--gold)}
.act-btn.del:hover{border-color:var(--red);color:#f87171}

/* ===== PRODUCT EDITOR ===== */
.prod-editor{background:var(--card);border:1px solid var(--border);border-radius:var(--r);overflow:hidden}
.pe-head{padding:20px 22px;border-bottom:1px solid var(--border);display:flex;align-items:center;justify-content:space-between}
.pe-head h3{font-size:.95rem;font-weight:700}
.pe-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(300px,1fr));gap:0;background:var(--border)}
.pe-card{background:var(--card);padding:22px;display:flex;gap:16px;transition:.2s}
.pe-card:hover{background:rgba(255,255,255,.02)}
.pe-thumb{width:60px;height:60px;border-radius:9px;background:var(--card2);display:flex;align-items:center;justify-content:center;font-size:1.5rem;flex-shrink:0;overflow:hidden}
.pe-thumb img{width:100%;height:100%;object-fit:cover}
.pe-info{flex:1;min-width:0}
.pe-name{font-size:.88rem;font-weight:700;margin-bottom:3px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}
.pe-sku{font-size:.65rem;color:var(--muted);margin-bottom:6px}
.pe-price{font-family:'Playfair Display';font-size:1.1rem;font-weight:900;color:var(--gold-light);margin-bottom:8px}
.pe-actions{display:flex;gap:6px;flex-wrap:wrap}

/* ===== FORMS ===== */
.form-card{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:26px}
.form-card h3{font-size:.95rem;font-weight:700;margin-bottom:20px;padding-bottom:14px;border-bottom:1px solid var(--border)}
.form-grid{display:grid;grid-template-columns:1fr 1fr;gap:14px}
@media(max-width:600px){.form-grid{grid-template-columns:1fr}}
.f-field{display:flex;flex-direction:column;gap:6px;margin-bottom:14px}
.f-field.full{grid-column:1/-1}
.f-field label{font-size:.66rem;font-weight:700;letter-spacing:.1em;text-transform:uppercase;color:rgba(245,242,236,.4)}
.f-field input,.f-field select,.f-field textarea{background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:8px;padding:11px 13px;color:var(--white);font-family:'DM Sans';font-size:.85rem;outline:none;transition:.2s;width:100%;-webkit-appearance:none}
.f-field input:focus,.f-field select:focus,.f-field textarea:focus{border-color:rgba(200,150,30,.4)}
.f-field input::placeholder,.f-field textarea::placeholder{color:var(--muted)}
.f-field select option{background:var(--card);color:var(--white)}
.f-field textarea{min-height:80px;resize:vertical}
.save-btn{display:flex;align-items:center;gap:8px;padding:12px 24px;background:linear-gradient(135deg,var(--gold),var(--gold-light));color:var(--bg);font-weight:800;font-size:.88rem;border-radius:9px;border:none;cursor:pointer;font-family:'DM Sans';transition:.3s}
.save-btn:hover{transform:translateY(-1px);box-shadow:0 8px 20px rgba(200,150,30,.3)}
.danger-btn{display:flex;align-items:center;gap:8px;padding:12px 24px;background:rgba(220,38,38,.12);border:1px solid rgba(220,38,38,.25);color:#f87171;font-weight:700;font-size:.88rem;border-radius:9px;border-radius:9px;cursor:pointer;font-family:'DM Sans';transition:.3s}
.danger-btn:hover{background:rgba(220,38,38,.2)}
.upload-zone{border:2px dashed rgba(200,150,30,.25);border-radius:9px;padding:24px;text-align:center;cursor:pointer;transition:.3s}
.upload-zone:hover{border-color:var(--gold);background:rgba(200,150,30,.03)}
.upload-zone p{font-size:.8rem;color:var(--muted2);margin-top:6px}
.upload-zone .ui{font-size:1.8rem;display:block;margin-bottom:4px}

/* ===== MODAL ===== */
.modal-bg{display:none;position:fixed;inset:0;background:rgba(0,0,0,.8);backdrop-filter:blur(10px);z-index:500;place-items:center;padding:20px}
.modal-bg.open{display:grid}
.modal-box{background:var(--card);border:1px solid rgba(200,150,30,.2);border-radius:18px;padding:32px;max-width:560px;width:100%;max-height:90vh;overflow-y:auto;position:relative}
.modal-box::before{content:'';position:absolute;top:0;inset-inline:0;height:3px;background:linear-gradient(90deg,transparent,var(--gold),var(--gold-light),var(--gold),transparent);border-radius:18px 18px 0 0}
.mc-btn{position:absolute;top:12px;right:12px;background:rgba(255,255,255,.06);border:1px solid var(--border);border-radius:50%;width:30px;height:30px;display:grid;place-items:center;cursor:pointer;color:var(--muted2);font-size:.85rem}
.mc-btn:hover{color:var(--white)}
.modal-title{font-family:'Playfair Display';font-size:1.4rem;font-weight:900;margin-bottom:20px}

/* ===== TOAST ===== */
.admin-toast{position:fixed;bottom:28px;left:50%;transform:translateX(-50%);padding:12px 24px;border-radius:10px;font-size:.83rem;font-weight:700;z-index:9999;animation:fadeUp .3s both;pointer-events:none;display:none}
@keyframes fadeUp{from{opacity:0;transform:translate(-50%,10px)}to{opacity:1;transform:translateX(-50%)}}
.admin-toast.success{background:rgba(22,163,74,.15);border:1px solid rgba(22,163,74,.3);color:#4ade80;display:block}
.admin-toast.error{background:rgba(220,38,38,.12);border:1px solid rgba(220,38,38,.25);color:#f87171;display:block}

/* ===== LIVE INDICATOR ===== */
.live-badge{display:flex;align-items:center;gap:6px;font-size:.7rem;color:var(--green-light);background:rgba(22,163,74,.1);border:1px solid rgba(22,163,74,.2);border-radius:100px;padding:4px 10px}
.lb-dot{width:6px;height:6px;border-radius:50%;background:var(--green-light);animation:blink 1.5s infinite}
@keyframes blink{0%,100%{opacity:1}50%{opacity:.2}}

/* ===== SCROLLBAR ===== */
::-webkit-scrollbar{width:4px}::-webkit-scrollbar-track{background:var(--bg)}::-webkit-scrollbar-thumb{background:rgba(200,150,30,.2);border-radius:4px}

/* ===== ORDERS DETAIL ===== */
.order-detail{background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:22px}
.od-meta{display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:14px;margin-bottom:18px}
.od-field label{font-size:.62rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);display:block;margin-bottom:4px}
.od-field p{font-size:.85rem;font-weight:600}
</style>
</head>
<body>

<!-- LOGIN SCREEN -->
<div class="login-screen" id="loginScreen">
  <div class="login-box">
    <div class="login-logo">GGS <em>Admin</em></div>
    <span class="login-sub">Secure Backend Access</span>
    <div class="login-field">
      <label>Username</label>
      <input type="text" id="loginUser" placeholder="admin" onkeydown="if(event.key==='Enter')doLogin()">
    </div>
    <div class="login-field">
      <label>Password</label>
      <input type="password" id="loginPass" placeholder="â€¢â€¢â€¢â€¢â€¢â€¢â€¢â€¢" onkeydown="if(event.key==='Enter')doLogin()">
    </div>
    <button class="login-btn" onclick="doLogin()">ğŸ” Sign In</button>
    <div class="login-err" id="loginErr">âŒ Invalid credentials. Try again.</div>
  </div>
</div>

<!-- SIDEBAR -->
<nav class="sidebar">
  <div class="sb-brand">
    <div class="name">GGS <em>Global</em></div>
    <span class="tag">Admin Dashboard</span>
  </div>
  <div class="sb-nav">
    <div class="sb-section">Overview</div>
    <button class="sb-link active" onclick="showPage('dashboard',this)"><span>ğŸ“Š</span> Dashboard</button>
    <button class="sb-link" onclick="showPage('orders',this)"><span>ğŸ“¦</span> Orders</button>
    <div class="sb-section">Catalog</div>
    <button class="sb-link" onclick="showPage('products',this)"><span>ğŸ›ï¸</span> Products</button>
    <button class="sb-link" onclick="showPage('addProduct',this)"><span>â•</span> Add Product</button>
    <div class="sb-section">Business</div>
    <button class="sb-link" onclick="showPage('pricing',this)"><span>ğŸ’°</span> Update Prices</button>
    <button class="sb-link" onclick="showPage('shipping',this)"><span>ğŸšš</span> Shipping Settings</button>
    <button class="sb-link" onclick="showPage('countdown',this)"><span>â±ï¸</span> Countdown / Slots</button>
    <button class="sb-link" onclick="showPage('referrals',this)"><span>ğŸ</span> Referrals</button>
    <div class="sb-section">Settings</div>
    <button class="sb-link" onclick="showPage('settings',this)"><span>âš™ï¸</span> Site Settings</button>
    <button class="sb-link" onclick="showPage('announcements',this)"><span>ğŸ“¢</span> Announcements</button>
  </div>
  <div class="sb-footer">
    <a href="ggs-landing.html" target="_blank">ğŸŒ View Live Site</a>
    <a href="#" onclick="logout()" style="color:#f87171;margin-top:4px">ğŸšª Sign Out</a>
  </div>
</nav>

<!-- MAIN CONTENT -->
<div class="main">
  <div class="topbar">
    <div style="display:flex;align-items:center;gap:14px">
      <h1 id="pageTitle">GGS <em>Dashboard</em></h1>
      <div class="live-badge"><span class="lb-dot"></span> Live</div>
    </div>
    <div class="tb-actions">
      <span style="font-size:.78rem;color:var(--muted2)" id="adminTime"></span>
      <button class="tb-btn tb-btn-ghost" onclick="showPage('addProduct',document.querySelector('.sb-link:nth-child(5)'))">â• Add Product</button>
      <button class="tb-btn tb-btn-primary" onclick="saveAllChanges()">ğŸ’¾ Save Changes</button>
    </div>
  </div>

  <div class="content">

    <!-- ===== DASHBOARD ===== -->
    <div class="page active" id="page-dashboard">
      <div class="stat-row">
        <div class="stat-card"><span class="sc-icon">ğŸ“¦</span><div class="sc-val" id="statOrders">0</div><div class="sc-label">Total Orders</div><div class="sc-trend">â†‘ 12% this week</div></div>
        <div class="stat-card"><span class="sc-icon">ğŸ’°</span><div class="sc-val" id="statRevenue">â‚¦0</div><div class="sc-label">Total Revenue</div><div class="sc-trend">â†‘ From Flutterwave</div></div>
        <div class="stat-card"><span class="sc-icon">ğŸ›ï¸</span><div class="sc-val" id="statProducts">0</div><div class="sc-label">Active Products</div><div class="sc-trend">Tech + Fashion</div></div>
        <div class="stat-card"><span class="sc-icon">ğŸ</span><div class="sc-val" id="statReferrals">0</div><div class="sc-label">Active Referrers</div><div class="sc-trend">â†‘ 3 this week</div></div>
        <div class="stat-card"><span class="sc-icon">â³</span><div class="sc-val" id="statSlots">7</div><div class="sc-label">Slots Remaining</div><div class="sc-trend" style="color:var(--red)">Closes Sunday</div></div>
      </div>

      <!-- Quick Actions -->
      <div class="form-card">
        <h3>âš¡ Quick Actions</h3>
        <div style="display:flex;gap:10px;flex-wrap:wrap">
          <button class="save-btn" onclick="showPage('addProduct',null)">â• Add New Product</button>
          <button class="tb-btn tb-btn-ghost" onclick="showPage('pricing',null)">ğŸ’° Update Prices</button>
          <button class="tb-btn tb-btn-ghost" onclick="showPage('countdown',null)">â±ï¸ Edit Countdown</button>
          <button class="tb-btn tb-btn-ghost" onclick="showPage('orders',null)">ğŸ“¦ View Orders</button>
          <a href="ggs-landing.html" target="_blank" class="tb-btn tb-btn-ghost" style="text-decoration:none;display:flex;align-items:center;gap:7px">ğŸŒ View Live Site</a>
        </div>
      </div>

      <!-- Recent Orders Preview -->
      <div class="table-wrap">
        <div class="table-head">
          <h3>ğŸ“‹ Recent Orders (from WhatsApp)</h3>
          <button class="tb-btn tb-btn-ghost" onclick="showPage('orders',null)">View All â†’</button>
        </div>
        <table>
          <thead><tr><th>Order ID</th><th>Customer</th><th>Items</th><th>Amount</th><th>Shipping</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody id="recentOrdersTable">
            <tr><td colspan="7" style="text-align:center;padding:28px;color:var(--muted)">Orders will appear here as customers checkout via the live site. You can also add manual orders below.</td></tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- ===== ORDERS ===== -->
    <div class="page" id="page-orders">
      <div class="form-card">
        <h3>â• Add Manual Order</h3>
        <div class="form-grid">
          <div class="f-field"><label>Customer Name</label><input type="text" id="moName" placeholder="Full name"></div>
          <div class="f-field"><label>WhatsApp Number</label><input type="tel" id="moPhone" placeholder="+234..."></div>
          <div class="f-field"><label>Email</label><input type="email" id="moEmail" placeholder="email@example.com"></div>
          <div class="f-field"><label>Delivery State</label><input type="text" id="moState" placeholder="e.g. Lagos"></div>
          <div class="f-field full"><label>Items Ordered</label><textarea id="moItems" placeholder="e.g. iPhone 15 Pro Max Ã— 1 (Natural Titanium) = â‚¦2,100,000"></textarea></div>
          <div class="f-field"><label>Total Amount (â‚¦)</label><input type="number" id="moAmount" placeholder="2100000"></div>
          <div class="f-field"><label>Shipping Method</label>
            <select id="moShipping">
              <option>Express Air (3â€“7 days)</option>
              <option>Standard Air (7â€“14 days)</option>
              <option>Battery Air (14â€“21 days)</option>
              <option>Sea Freight (50â€“60 days)</option>
            </select>
          </div>
          <div class="f-field"><label>Payment Status</label>
            <select id="moPayment">
              <option>Paid</option><option>Pending</option><option>Partial</option>
            </select>
          </div>
          <div class="f-field"><label>Order Status</label>
            <select id="moStatus">
              <option>Received</option><option>Processing</option><option>Shipped</option><option>Arrived in Nigeria</option><option>Delivered</option>
            </select>
          </div>
          <div class="f-field"><label>Transaction Reference</label><input type="text" id="moRef" placeholder="GGS-XXXXXX"></div>
        </div>
        <button class="save-btn" onclick="addManualOrder()">â• Add Order</button>
      </div>
      <div class="table-wrap">
        <div class="table-head">
          <h3>All Orders</h3>
          <input class="t-search" type="search" placeholder="Search orders..." oninput="filterOrders(this.value)">
        </div>
        <table>
          <thead><tr><th>Order ID</th><th>Customer</th><th>Phone</th><th>Amount</th><th>Shipping</th><th>Payment</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody id="ordersTable"><tr><td colspan="8" style="text-align:center;padding:28px;color:var(--muted)">No orders yet. Add one above or wait for customers to checkout.</td></tr></tbody>
        </table>
      </div>
    </div>

    <!-- ===== PRODUCTS ===== -->
    <div class="page" id="page-products">
      <div class="prod-editor">
        <div class="pe-head">
          <h3>ğŸ“± Tech Products</h3>
          <button class="save-btn" onclick="showPage('addProduct',null)">â• Add Product</button>
        </div>
        <div class="pe-grid" id="techProdList"></div>
      </div>
      <div class="prod-editor">
        <div class="pe-head"><h3>ğŸ‘œ Fashion Products</h3></div>
        <div class="pe-grid" id="fashionProdList"></div>
      </div>
    </div>

    <!-- ===== ADD PRODUCT ===== -->
    <div class="page" id="page-addProduct">
      <div class="form-card">
        <h3>â• Add / Edit Product</h3>
        <div class="form-grid">
          <div class="f-field"><label>Product ID</label><input type="text" id="apId" placeholder="T09 or F07"></div>
          <div class="f-field"><label>Category</label>
            <select id="apCat"><option value="tech">ğŸ“± Tech & Gadgets</option><option value="fashion">ğŸ‘œ Fashion</option></select>
          </div>
          <div class="f-field full"><label>Product Name</label><input type="text" id="apName" placeholder="e.g. iPhone 15 Pro"></div>
          <div class="f-field full"><label>Specifications</label><textarea id="apSpec" placeholder="e.g. 128GB Â· All Colors Â· Factory Sealed Â· Unlocked"></textarea></div>
          <div class="f-field"><label>Price (â‚¦)</label><input type="number" id="apPrice" placeholder="1000000"></div>
          <div class="f-field"><label>Emoji Icon</label><input type="text" id="apIcon" placeholder="ğŸ“±" maxlength="4"></div>
          <div class="f-field full"><label>Image URL (from Unsplash or your storage)</label><input type="text" id="apImg" placeholder="https://images.unsplash.com/..."></div>
          <div class="f-field full"><label>Variants (one per line)</label><textarea id="apVariants" placeholder="Natural Titanium&#10;Blue Titanium&#10;White Titanium&#10;Black Titanium"></textarea></div>
          <div class="f-field"><label>Badge Type</label>
            <select id="apBadge">
              <option value="">None</option>
              <option value="hot">ğŸ”¥ Hot / Bestseller</option>
              <option value="new">ğŸ†• New Drop</option>
              <option value="pick">ğŸ’° Budget Pick</option>
            </select>
          </div>
          <div class="f-field"><label>Badge Text</label><input type="text" id="apBadgeText" placeholder="ğŸ”¥ Bestseller"></div>
        </div>
        <div style="display:flex;gap:10px;flex-wrap:wrap;margin-top:6px">
          <button class="save-btn" onclick="addProduct()">ğŸ’¾ Save Product to Catalog</button>
          <button class="danger-btn" onclick="clearProductForm()">âœ• Clear Form</button>
        </div>
      </div>
      <div class="form-card">
        <h3>ğŸ“¸ Upload Product Image</h3>
        <p style="font-size:.8rem;color:var(--muted2);margin-bottom:16px">Paste an Unsplash URL, a direct image link, or use a hosting service like Cloudinary/ImgBB. Copy the link and paste it in the Image URL field above.</p>
        <div class="upload-zone" onclick="document.getElementById('imgUpload').click()">
          <span class="ui">ğŸ–¼ï¸</span>
          <p>Click to upload or drag & drop an image<br><span style="font-size:.7rem;color:var(--muted)">JPG, PNG, WEBP Â· Max 5MB</span></p>
          <input type="file" id="imgUpload" accept="image/*" style="display:none" onchange="handleImageUpload(event)">
        </div>
        <div id="imgPreview" style="margin-top:14px;display:none">
          <img id="previewImg" style="max-width:100%;max-height:200px;border-radius:8px;border:1px solid var(--border)">
          <p style="font-size:.72rem;color:var(--muted2);margin-top:6px">To use this image, host it on <a href="https://imgbb.com" target="_blank" style="color:var(--gold)">ImgBB</a> or <a href="https://cloudinary.com" target="_blank" style="color:var(--gold)">Cloudinary</a> and paste the URL above.</p>
        </div>
      </div>
    </div>

    <!-- ===== PRICING ===== -->
    <div class="page" id="page-pricing">
      <div class="form-card">
        <h3>ğŸ’° Update Product Prices</h3>
        <p style="font-size:.82rem;color:var(--muted2);margin-bottom:20px">Update prices here when exchange rates change. Changes apply immediately to the catalog when saved.</p>
        <div id="pricingList"></div>
        <button class="save-btn" onclick="savePrices()" style="margin-top:10px">ğŸ’¾ Save All Price Updates</button>
      </div>
      <div class="form-card">
        <h3>ğŸ’± Exchange Rate Reference</h3>
        <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(140px,1fr));gap:10px">
          <div class="stat-card"><div class="sc-val" id="usdRate" style="font-size:1.4rem">â‚¦1,580</div><div class="sc-label">USD Rate (Manual)</div></div>
          <div class="stat-card"><div class="sc-val" id="cnyRate" style="font-size:1.4rem">â‚¦215</div><div class="sc-label">CNY Rate (Manual)</div></div>
        </div>
        <div style="display:flex;gap:12px;margin-top:14px;flex-wrap:wrap">
          <div class="f-field" style="flex:1;min-width:140px"><label>USD/NGN Rate</label><input type="number" id="usdInput" placeholder="1580" oninput="document.getElementById('usdRate').textContent='â‚¦'+this.value"></div>
          <div class="f-field" style="flex:1;min-width:140px"><label>CNY/NGN Rate</label><input type="number" id="cnyInput" placeholder="215" oninput="document.getElementById('cnyRate').textContent='â‚¦'+this.value"></div>
        </div>
        <button class="save-btn" onclick="showToast('Rate reference saved!','success')">ğŸ’¾ Save Rate Reference</button>
      </div>
    </div>

    <!-- ===== SHIPPING SETTINGS ===== -->
    <div class="page" id="page-shipping">
      <div class="form-card">
        <h3>ğŸšš Shipping Method Settings</h3>
        <p style="font-size:.82rem;color:var(--muted2);margin-bottom:20px">Update delivery time windows and descriptions displayed on the landing page.</p>
        <div id="shippingMethods">
          <div style="background:var(--card2);border:1px solid var(--border);border-radius:var(--r);padding:18px;margin-bottom:12px">
            <div style="font-weight:700;margin-bottom:12px;color:var(--gold-light)">âœˆï¸âš¡ Express Air Freight</div>
            <div class="form-grid">
              <div class="f-field"><label>Delivery Window</label><input type="text" value="3â€“7 Days" id="s1time"></div>
              <div class="f-field"><label>Status</label><select id="s1status"><option>Active</option><option>Inactive</option></select></div>
              <div class="f-field full"><label>Description</label><textarea id="s1desc">Fastest option â€” ideal for urgent orders and premium gadgets. Door-to-door priority courier service.</textarea></div>
            </div>
          </div>
          <div style="background:var(--card2);border:1px solid var(--border);border-radius:var(--r);padding:18px;margin-bottom:12px">
            <div style="font-weight:700;margin-bottom:12px;color:var(--gold-light)">âœˆï¸ Standard Air Cargo</div>
            <div class="form-grid">
              <div class="f-field"><label>Delivery Window</label><input type="text" value="7â€“14 Days" id="s2time"></div>
              <div class="f-field"><label>Status</label><select id="s2status"><option>Active</option><option>Inactive</option></select></div>
              <div class="f-field full"><label>Description</label><textarea id="s2desc">Reliable air shipping for non-battery goods. Calculated by weight (kg).</textarea></div>
            </div>
          </div>
          <div style="background:var(--card2);border:1px solid var(--border);border-radius:var(--r);padding:18px;margin-bottom:12px">
            <div style="font-weight:700;margin-bottom:12px;color:var(--gold-light)">âœˆï¸ğŸ”‹ Battery Air Cargo</div>
            <div class="form-grid">
              <div class="f-field"><label>Delivery Window</label><input type="text" value="14â€“21 Days" id="s3time"></div>
              <div class="f-field"><label>Status</label><select id="s3status"><option>Active</option><option>Inactive</option></select></div>
              <div class="f-field full"><label>Description</label><textarea id="s3desc">Certified air freight for battery-containing items. Dedicated certified route.</textarea></div>
            </div>
          </div>
          <div style="background:var(--card2);border:1px solid var(--border);border-radius:var(--r);padding:18px">
            <div style="font-weight:700;margin-bottom:12px;color:var(--gold-light)">ğŸš¢ Sea Freight</div>
            <div class="form-grid">
              <div class="f-field"><label>Delivery Window</label><input type="text" value="50â€“60 Days" id="s4time"></div>
              <div class="f-field"><label>Status</label><select id="s4status"><option>Active</option><option>Inactive</option></select></div>
              <div class="f-field full"><label>Description</label><textarea id="s4desc">Most economical option for large/heavy orders. Cost per kg significantly lower.</textarea></div>
            </div>
          </div>
        </div>
        <div style="display:flex;gap:10px;margin-top:14px;flex-wrap:wrap">
          <div class="f-field" style="flex:1"><label>Port Harcourt Delivery</label><input type="text" value="Free" id="phDelivery"></div>
          <div class="f-field" style="flex:1"><label>Other States Delivery (â‚¦)</label><input type="number" value="5000" id="otherDelivery"></div>
        </div>
        <button class="save-btn" onclick="saveShipping()">ğŸ’¾ Save Shipping Settings</button>
      </div>
    </div>

    <!-- ===== COUNTDOWN ===== -->
    <div class="page" id="page-countdown">
      <div class="form-card">
        <h3>â±ï¸ Countdown Timer Settings</h3>
        <div class="form-grid">
          <div class="f-field"><label>Pre-Order Round Name</label><input type="text" id="cdTitle" value="Pre-Order Round 2" placeholder="Round 2"></div>
          <div class="f-field"><label>Deadline Date</label><input type="datetime-local" id="cdDeadline"></div>
          <div class="f-field"><label>Total Slots</label><input type="number" id="cdTotalSlots" value="15"></div>
          <div class="f-field"><label>Slots Taken</label><input type="number" id="cdSlotsTaken" value="8"></div>
          <div class="f-field full"><label>Urgency Message</label><input type="text" id="cdMessage" value="Lock in current prices with deposit. Prices increase next round."></div>
        </div>
        <button class="save-btn" onclick="saveCountdown()">ğŸ’¾ Save Countdown Settings</button>
      </div>
      <div class="form-card">
        <h3>ğŸ¯ Current Countdown Preview</h3>
        <div style="display:flex;gap:12px;align-items:center;flex-wrap:wrap">
          <div style="background:var(--card2);border:1px solid rgba(200,150,30,.2);border-radius:9px;padding:12px 18px;text-align:center;min-width:60px">
            <div style="font-family:'Playfair Display';font-size:2rem;font-weight:900;color:var(--gold-light)" id="preCD">--</div>
            <div style="font-size:.55rem;color:var(--muted);letter-spacing:.14em;text-transform:uppercase">Days</div>
          </div>
          <div style="font-family:'Playfair Display';font-size:1.8rem;color:var(--gold)">:</div>
          <div style="background:var(--card2);border:1px solid rgba(200,150,30,.2);border-radius:9px;padding:12px 18px;text-align:center;min-width:60px">
            <div style="font-family:'Playfair Display';font-size:2rem;font-weight:900;color:var(--gold-light)" id="preCH">--</div>
            <div style="font-size:.55rem;color:var(--muted);letter-spacing:.14em;text-transform:uppercase">Hrs</div>
          </div>
          <div style="font-family:'Playfair Display';font-size:1.8rem;color:var(--gold)">:</div>
          <div style="background:var(--card2);border:1px solid rgba(200,150,30,.2);border-radius:9px;padding:12px 18px;text-align:center;min-width:60px">
            <div style="font-family:'Playfair Display';font-size:2rem;font-weight:900;color:var(--gold-light)" id="preCM">--</div>
            <div style="font-size:.55rem;color:var(--muted);letter-spacing:.14em;text-transform:uppercase">Mins</div>
          </div>
        </div>
        <p style="font-size:.78rem;color:var(--muted2);margin-top:12px">âš¡ Timer auto-targets next Sunday 11:59 PM if no deadline set.</p>
      </div>
    </div>

    <!-- ===== REFERRALS ===== -->
    <div class="page" id="page-referrals">
      <div class="form-card">
        <h3>â• Add Referral Record</h3>
        <div class="form-grid">
          <div class="f-field"><label>Referrer Name</label><input type="text" id="rfName" placeholder="Funmi N."></div>
          <div class="f-field"><label>WhatsApp</label><input type="tel" id="rfPhone" placeholder="+234..."></div>
          <div class="f-field"><label>Number of Referrals</label><input type="number" id="rfCount" value="1" min="1"></div>
          <div class="f-field"><label>Tier Achieved</label>
            <select id="rfTier"><option>ğŸ¥‰ Bronze (1 ref)</option><option>ğŸ¥ˆ Silver (3 refs)</option><option>ğŸ¥‡ Gold (5 refs)</option><option>ğŸ’ Platinum (10 refs)</option></select>
          </div>
          <div class="f-field"><label>Reward</label><input type="text" id="rfReward" placeholder="â‚¦25,000 store credit"></div>
          <div class="f-field"><label>Status</label>
            <select id="rfStatus"><option>Pending</option><option>Paid/Applied</option><option>Processing</option></select>
          </div>
        </div>
        <button class="save-btn" onclick="addReferral()">â• Add Referral</button>
      </div>
      <div class="table-wrap">
        <div class="table-head"><h3>Referral Records</h3></div>
        <table>
          <thead><tr><th>Referrer</th><th>Phone</th><th>Refs</th><th>Tier</th><th>Reward</th><th>Status</th><th>Actions</th></tr></thead>
          <tbody id="referralTable"><tr><td colspan="7" style="text-align:center;padding:28px;color:var(--muted)">No referral records yet.</td></tr></tbody>
        </table>
      </div>
    </div>

    <!-- ===== SETTINGS ===== */
    <div class="page" id="page-settings">
      <div class="form-card">
        <h3>âš™ï¸ Site Settings</h3>
        <div class="form-grid">
          <div class="f-field"><label>Business Name</label><input type="text" id="setBizName" value="GGS Global Consult"></div>
          <div class="f-field"><label>WhatsApp Number</label><input type="text" id="setWA" value="2348142717585"></div>
          <div class="f-field"><label>Flutterwave Public Key</label><input type="text" id="setFW" value="FLWPUBK-14a050e1c6e7309deb9d08c19c4e4013-X"></div>
          <div class="f-field"><label>Business Email</label><input type="email" id="setEmail" value="richyglobalshops@gmail.com"></div>
          <div class="f-field"><label>Business Location</label><input type="text" id="setLocation" value="Port Harcourt, Nigeria"></div>
          <div class="f-field"><label>Admin Password</label><input type="password" id="setPass" placeholder="Change password..."></div>
        </div>
        <button class="save-btn" onclick="saveSettings()">ğŸ’¾ Save Settings</button>
      </div>
      <div class="form-card">
        <h3>ğŸ” Admin Credentials</h3>
        <p style="font-size:.82rem;color:var(--muted2);margin-bottom:16px">Current login: <strong style="color:var(--gold-light)">admin / ggs2025admin</strong></p>
        <div class="form-grid">
          <div class="f-field"><label>New Username</label><input type="text" id="newUser" placeholder="new username"></div>
          <div class="f-field"><label>New Password</label><input type="password" id="newPass" placeholder="new password"></div>
        </div>
        <button class="save-btn" onclick="changeCredentials()">ğŸ” Update Credentials</button>
      </div>
    </div>

    <!-- ===== ANNOUNCEMENTS ===== -->
    <div class="page" id="page-announcements">
      <div class="form-card">
        <h3>ğŸ“¢ Ticker Bar Message</h3>
        <div class="f-field"><label>Current Ticker Text</label><textarea id="tickerText" style="min-height:80px">ğŸ”¥ Pre-Order Round 2 LIVE Â· âœ… 100% Authentic Â· ğŸšš Nationwide Delivery Â· ğŸ’³ Cost Price Only Â· â­ 200+ Happy Customers</textarea></div>
        <button class="save-btn" onclick="saveTicker()">ğŸ’¾ Update Ticker</button>
      </div>
      <div class="form-card">
        <h3>ğŸ”´ Alert Banner</h3>
        <div class="form-grid">
          <div class="f-field full"><label>Banner Message</label><input type="text" id="bannerMsg" value="ğŸ”¥ Pre-Order Round 2 LIVE â€” Only 7 Slots Left Â· Closes Sunday 11:59 PM Â· Secure Yours Now ğŸ”¥"></div>
          <div class="f-field"><label>Banner Visible</label><select id="bannerVisible"><option>Yes</option><option>No</option></select></div>
        </div>
        <button class="save-btn" onclick="saveBanner()">ğŸ’¾ Update Banner</button>
      </div>
    </div>

  </div><!-- end content -->
</div><!-- end main -->

<!-- PRODUCT EDIT MODAL -->
<div class="modal-bg" id="editModal">
  <div class="modal-box">
    <button class="mc-btn" onclick="closeModal('editModal')">âœ•</button>
    <div class="modal-title">Edit Product</div>
    <div class="form-grid">
      <div class="f-field"><label>Product Name</label><input type="text" id="emName"></div>
      <div class="f-field"><label>Price (â‚¦)</label><input type="number" id="emPrice"></div>
      <div class="f-field full"><label>Specifications</label><textarea id="emSpec"></textarea></div>
      <div class="f-field full"><label>Image URL</label><input type="text" id="emImg"></div>
      <div class="f-field full"><label>Variants (one per line)</label><textarea id="emVariants"></textarea></div>
    </div>
    <input type="hidden" id="emId"><input type="hidden" id="emCat">
    <div style="display:flex;gap:10px;margin-top:6px">
      <button class="save-btn" onclick="saveEditProduct()">ğŸ’¾ Save Changes</button>
      <button class="danger-btn" onclick="closeModal('editModal')">Cancel</button>
    </div>
  </div>
</div>

<!-- ORDER DETAIL MODAL -->
<div class="modal-bg" id="orderModal">
  <div class="modal-box">
    <button class="mc-btn" onclick="closeModal('orderModal')">âœ•</button>
    <div class="modal-title">Order Details</div>
    <div id="orderDetailContent"></div>
    <div style="margin-top:18px;display:flex;gap:10px;flex-wrap:wrap">
      <select id="orderStatusUpdate" style="background:var(--card2);border:1px solid var(--border);border-radius:8px;padding:10px 12px;color:var(--white);font-family:'DM Sans';font-size:.83rem;outline:none">
        <option>Received</option><option>Processing</option><option>Shipped</option><option>Arrived in Nigeria</option><option>Delivered</option>
      </select>
      <button class="save-btn" onclick="updateOrderStatus()">âœ… Update Status</button>
      <button class="tb-btn tb-btn-ghost" id="waOrderBtn" onclick="contactOrderViaWA()">ğŸ’¬ WhatsApp Customer</button>
    </div>
  </div>
</div>

<!-- TOAST -->
<div class="admin-toast" id="adminToast"></div>

<script>
// ============================================================
// AUTH
// ============================================================
let credentials={username:'admin',password:'ggs2025admin'};

function doLogin(){
  const u=document.getElementById('loginUser').value.trim();
  const p=document.getElementById('loginPass').value.trim();
  if(u===credentials.username&&p===credentials.password){
    document.getElementById('loginScreen').classList.add('hidden');
    initAdmin();
  } else {
    document.getElementById('loginErr').style.display='block';
    document.getElementById('loginPass').value='';
  }
}

function logout(){
  if(confirm('Sign out?')){location.reload();}
}

// ============================================================
// DATA STORE (localStorage for persistence)
// ============================================================
let store = {
  orders:[],
  referrals:[],
  products: null,
};

function loadStore(){
  try{
    const s=localStorage.getItem('ggs_admin');
    if(s)store=JSON.parse(s);
    if(!store.products)store.products={tech:[],fashion:[]};
    if(!store.orders)store.orders=[];
    if(!store.referrals)store.referrals=[];
  } catch(e){console.warn('Store load failed')}
}

function saveStore(){
  try{localStorage.setItem('ggs_admin',JSON.stringify(store));}catch(e){}
}

// Default product data from main site
const defaultProducts = {
  tech:[
    {id:'T01',name:'iPhone 15 Pro Max',spec:'256GB Â· All Colors Â· Factory Sealed Â· Unlocked',price:2100000,icon:'ğŸ“±',badge:'hot',badgeText:'ğŸ”¥ Bestseller',variants:['Natural Titanium','Blue Titanium','White Titanium','Black Titanium'],img:'https://images.unsplash.com/photo-1695048133142-1a20484d2569?w=600&q=80'},
    {id:'T02',name:'iPhone 14 Pro',spec:'256GB Â· All Colors Â· Sealed Â· Verified Authentic',price:1350000,icon:'ğŸ“±',badge:'pick',badgeText:'ğŸ’° Budget Pick',variants:['Space Black','Gold','Silver','Deep Purple'],img:'https://images.unsplash.com/photo-1664478546384-d57ffe74a78c?w=600&q=80'},
    {id:'T03',name:'Samsung S24 Ultra',spec:'All Storage Â· Unlocked Â· Original Factory Seal',price:1450000,icon:'ğŸ“±',badge:'',badgeText:'',variants:['Titanium Black','Titanium Gray','Titanium Violet'],img:'https://images.unsplash.com/photo-1707148029295-0b24dc8c45e6?w=600&q=80'},
    {id:'T04',name:'MacBook Air M2',spec:'256GB SSD Â· 8GB RAM Â· All Colors Â· Apple Seal',price:1850000,icon:'ğŸ’»',badge:'hot',badgeText:'â­ Top Rated',variants:['Midnight','Starlight','Space Gray','Silver'],img:'https://images.unsplash.com/photo-1611186871348-b1ce696e52c9?w=600&q=80'},
    {id:'T05',name:'iPad Air 11" M2',spec:'128GB Â· WiFi Â· All Colors Â· Sealed',price:950000,icon:'ğŸ“²',badge:'',badgeText:'',variants:['Blue','Purple','Starlight','Space Gray'],img:'https://images.unsplash.com/photo-1544244015-0df4b3ffc6b0?w=600&q=80'},
    {id:'T06',name:'AirPods Pro (2nd Gen)',spec:'USB-C Charging Case Â· Adaptive Audio Â· Original Seal',price:180000,icon:'ğŸ§',badge:'',badgeText:'',variants:['White (Standard)'],img:'https://images.unsplash.com/photo-1588156979435-379b9d802b0a?w=600&q=80'},
    {id:'T07',name:'Apple Watch Series 9',spec:'45mm Â· GPS Â· All Colors Â· Sealed',price:320000,icon:'âŒš',badge:'new',badgeText:'ğŸ†• New',variants:['Midnight','Starlight','Red','Pink'],img:'https://images.unsplash.com/photo-1579586337278-3befd40fd17a?w=600&q=80'},
    {id:'T08',name:'Anker PowerBank 20K',spec:'20,000mAh Â· PD Fast Charge Â· Original Packaging',price:45000,icon:'âš¡',badge:'pick',badgeText:'Add-On',variants:['Black','White'],img:'https://images.unsplash.com/photo-1609091839311-d5365f9ff1c5?w=600&q=80'},
  ],
  fashion:[
    {id:'F01',name:'Designer Crossbody Bag',spec:'50+ styles Â· Premium leather Â· All colors',price:70000,icon:'ğŸ‘œ',badge:'new',badgeText:'ğŸ’ New Drop',variants:['Black','Brown','Beige/Nude','White','Red'],img:'https://images.unsplash.com/photo-1548036328-c9fa89d128fa?w=600&q=80'},
    {id:'F02',name:'Luxury Tote Bag',spec:'Structured & soft styles Â· Multiple sizes',price:78000,icon:'ğŸ‘œ',badge:'',badgeText:'',variants:['Black','Brown','Beige','Caramel','Grey'],img:'https://images.unsplash.com/photo-1590874103328-eac38a683ce7?w=600&q=80'},
    {id:'F03',name:'Premium Ladies Heels',spec:'Kitten Â· Block Â· Stiletto Â· Sizes 36â€“42',price:48000,icon:'ğŸ‘ ',badge:'hot',badgeText:'ğŸ”¥ High Demand',variants:['Size 36 â€“ Kitten','Size 38 â€“ Block','Size 40 â€“ Stiletto'],img:'https://images.unsplash.com/photo-1543163521-1bf539c55dd2?w=600&q=80'},
    {id:'F04',name:"Ladies Flats & Loafers",spec:'Leather loafers Â· Ballet flats Â· Sizes 36â€“42',price:38000,icon:'ğŸ‘Ÿ',badge:'',badgeText:'',variants:['Size 36','Size 38','Size 40','Size 42'],img:'https://images.unsplash.com/photo-1603808033192-082d6919d3e1?w=600&q=80'},
    {id:'F05',name:"Men's Premium Oxfords",spec:'Genuine leather Â· Sizes 40â€“47 Â· Black & Brown',price:55000,icon:'ğŸ‘',badge:'',badgeText:'',variants:['Size 42 â€“ Black','Size 43 â€“ Brown','Size 44 â€“ Black'],img:'https://images.unsplash.com/photo-1614252235316-8c857d38b5f4?w=600&q=80'},
    {id:'F06',name:'Evening Clutch / Mini Bag',spec:'Embellished Â· Plain leather Â· Chain strap',price:38000,icon:'ğŸ’¼',badge:'',badgeText:'',variants:['Black â€“ Plain','Gold â€“ Embellished','Silver â€“ Embellished'],img:'https://images.unsplash.com/photo-1566150905458-1bf1fb99e4b8?w=600&q=80'},
  ]
};

// ============================================================
// INIT
// ============================================================
function initAdmin(){
  loadStore();
  if(!store.products||(!store.products.tech.length&&!store.products.fashion.length)){
    store.products=JSON.parse(JSON.stringify(defaultProducts));
  }
  renderDashboardStats();
  renderProductsPage();
  renderPricingPage();
  renderOrdersTable();
  renderReferralTable();
  setInterval(updateAdminTime,1000);
  updateAdminTime();
}

function updateAdminTime(){
  const now=new Date();
  document.getElementById('adminTime').textContent=now.toLocaleString('en-NG',{weekday:'short',month:'short',day:'numeric',hour:'2-digit',minute:'2-digit'});
}

// ============================================================
// PAGES
// ============================================================
function showPage(id,btn){
  document.querySelectorAll('.page').forEach(p=>p.classList.remove('active'));
  document.querySelectorAll('.sb-link').forEach(l=>l.classList.remove('active'));
  const page=document.getElementById('page-'+id);
  if(page)page.classList.add('active');
  if(btn){btn.classList.add('active');}
  const titles={dashboard:'GGS <em>Dashboard</em>',orders:'Manage <em>Orders</em>',products:'Product <em>Catalog</em>',addProduct:'Add <em>Product</em>',pricing:'Update <em>Prices</em>',shipping:'Shipping <em>Settings</em>',countdown:'Countdown <em>Timer</em>',referrals:'Referral <em>Records</em>',settings:'Site <em>Settings</em>',announcements:'Announcements <em>& Banners</em>'};
  document.getElementById('pageTitle').innerHTML=titles[id]||'GGS <em>Admin</em>';
}

// ============================================================
// DASHBOARD
// ============================================================
function renderDashboardStats(){
  const pCount=(store.products.tech.length||0)+(store.products.fashion.length||0);
  const revenue=store.orders.reduce((s,o)=>s+(parseInt(o.amount)||0),0);
  document.getElementById('statOrders').textContent=store.orders.length;
  document.getElementById('statRevenue').textContent='â‚¦'+revenue.toLocaleString('en-NG');
  document.getElementById('statProducts').textContent=pCount;
  document.getElementById('statReferrals').textContent=store.referrals.length;
}

// ============================================================
// PRODUCTS
// ============================================================
function renderProductsPage(){
  ['tech','fashion'].forEach(cat=>{
    const list=document.getElementById(cat+'ProdList');
    const prods=store.products[cat];
    if(!prods.length){list.innerHTML='<p style="padding:20px;color:var(--muted)">No products. Add one above.</p>';return;}
    list.innerHTML=prods.map((p,i)=>`
      <div class="pe-card">
        <div class="pe-thumb">${p.img?`<img src="${p.img}" alt="${p.name}">`:`<span>${p.icon}</span>`}</div>
        <div class="pe-info">
          <div class="pe-name">#${p.id} ${p.name}</div>
          <div class="pe-sku">${p.spec.substring(0,50)}...</div>
          <div class="pe-price">â‚¦${p.price.toLocaleString('en-NG')}</div>
          <div class="pe-actions">
            <button class="act-btn" onclick="openEditModal('${cat}',${i})">âœï¸ Edit</button>
            <button class="act-btn del" onclick="deleteProduct('${cat}',${i})">ğŸ—‘ï¸ Delete</button>
          </div>
        </div>
      </div>`).join('');
  });
}

function openEditModal(cat,i){
  const p=store.products[cat][i];
  document.getElementById('emId').value=i;
  document.getElementById('emCat').value=cat;
  document.getElementById('emName').value=p.name;
  document.getElementById('emPrice').value=p.price;
  document.getElementById('emSpec').value=p.spec;
  document.getElementById('emImg').value=p.img||'';
  document.getElementById('emVariants').value=(p.variants||[]).join('\n');
  document.getElementById('editModal').classList.add('open');
}

function saveEditProduct(){
  const i=parseInt(document.getElementById('emId').value);
  const cat=document.getElementById('emCat').value;
  store.products[cat][i].name=document.getElementById('emName').value;
  store.products[cat][i].price=parseInt(document.getElementById('emPrice').value)||0;
  store.products[cat][i].spec=document.getElementById('emSpec').value;
  store.products[cat][i].img=document.getElementById('emImg').value;
  store.products[cat][i].variants=document.getElementById('emVariants').value.split('\n').filter(v=>v.trim());
  saveStore();renderProductsPage();renderPricingPage();
  closeModal('editModal');showToast('Product updated!','success');
}

function deleteProduct(cat,i){
  if(confirm(`Delete "${store.products[cat][i].name}"? This cannot be undone.`)){
    store.products[cat].splice(i,1);saveStore();renderProductsPage();renderDashboardStats();
    showToast('Product deleted.','success');
  }
}

function addProduct(){
  const cat=document.getElementById('apCat').value;
  const variants=document.getElementById('apVariants').value.split('\n').filter(v=>v.trim());
  const prod={
    id:document.getElementById('apId').value.trim()||('P'+Date.now()),
    name:document.getElementById('apName').value.trim(),
    spec:document.getElementById('apSpec').value.trim(),
    price:parseInt(document.getElementById('apPrice').value)||0,
    icon:document.getElementById('apIcon').value.trim()||'ğŸ“¦',
    img:document.getElementById('apImg').value.trim(),
    badge:document.getElementById('apBadge').value,
    badgeText:document.getElementById('apBadgeText').value.trim(),
    variants
  };
  if(!prod.name||!prod.price){showToast('Please fill in Product Name and Price.','error');return;}
  store.products[cat].push(prod);
  saveStore();renderProductsPage();renderPricingPage();renderDashboardStats();
  showToast(`"${prod.name}" added to ${cat} catalog!`,'success');
  clearProductForm();
}

function clearProductForm(){
  ['apId','apName','apSpec','apPrice','apIcon','apImg','apVariants','apBadgeText'].forEach(id=>{
    const el=document.getElementById(id);if(el)el.value='';
  });
  ['apCat','apBadge'].forEach(id=>{const el=document.getElementById(id);if(el)el.selectedIndex=0;});
}

function handleImageUpload(e){
  const file=e.target.files[0];if(!file)return;
  const reader=new FileReader();
  reader.onload=ev=>{
    document.getElementById('previewImg').src=ev.target.result;
    document.getElementById('imgPreview').style.display='block';
  };
  reader.readAsDataURL(file);
}

// ============================================================
// PRICING
// ============================================================
function renderPricingPage(){
  const list=document.getElementById('pricingList');
  let html='';
  ['tech','fashion'].forEach(cat=>{
    store.products[cat].forEach((p,i)=>{
      html+=`<div style="display:flex;align-items:center;gap:14px;padding:12px 0;border-bottom:1px solid var(--border)">
        <span style="font-size:1.2rem;flex-shrink:0">${p.icon}</span>
        <div style="flex:1;min-width:0">
          <div style="font-size:.85rem;font-weight:700">#${p.id} ${p.name}</div>
          <div style="font-size:.7rem;color:var(--muted2)">${cat.charAt(0).toUpperCase()+cat.slice(1)}</div>
        </div>
        <div style="display:flex;align-items:center;gap:8px">
          <span style="font-size:.75rem;color:var(--muted)">â‚¦</span>
          <input type="number" value="${p.price}" data-cat="${cat}" data-idx="${i}" style="background:rgba(255,255,255,.04);border:1px solid var(--border);border-radius:7px;padding:8px 12px;color:var(--gold-light);font-family:'DM Sans';font-size:.88rem;outline:none;width:140px;transition:.2s;font-weight:700" 
            onfocus="this.style.borderColor='rgba(200,150,30,.4)'" onblur="this.style.borderColor='var(--border)'">
        </div>
      </div>`;
    });
  });
  list.innerHTML=html||'<p style="color:var(--muted)">No products found. Add some first.</p>';
}

function savePrices(){
  document.querySelectorAll('#pricingList input[data-cat]').forEach(inp=>{
    const cat=inp.dataset.cat,idx=parseInt(inp.dataset.idx);
    store.products[cat][idx].price=parseInt(inp.value)||0;
  });
  saveStore();renderProductsPage();showToast('All prices updated successfully!','success');
}

// ============================================================
// ORDERS
// ============================================================
let currentOrderIdx=null;

function addManualOrder(){
  const order={
    id:'GGS-'+Date.now(),
    name:document.getElementById('moName').value.trim(),
    phone:document.getElementById('moPhone').value.trim(),
    email:document.getElementById('moEmail').value.trim(),
    state:document.getElementById('moState').value.trim(),
    items:document.getElementById('moItems').value.trim(),
    amount:parseInt(document.getElementById('moAmount').value)||0,
    shipping:document.getElementById('moShipping').value,
    payment:document.getElementById('moPayment').value,
    status:document.getElementById('moStatus').value,
    ref:document.getElementById('moRef').value.trim()||('GGS-'+Date.now()),
    date:new Date().toLocaleDateString('en-NG')
  };
  if(!order.name||!order.items){showToast('Please fill in customer name and items.','error');return;}
  store.orders.unshift(order);
  saveStore();renderOrdersTable();renderDashboardStats();
  showToast('Order added!','success');
  ['moName','moPhone','moEmail','moState','moItems','moAmount','moRef'].forEach(id=>{document.getElementById(id).value='';});
}

function renderOrdersTable(filter=''){
  const tbody=document.getElementById('ordersTable');
  const filtered=store.orders.filter(o=>!filter||(o.name+o.id+o.items+o.phone).toLowerCase().includes(filter.toLowerCase()));
  if(!filtered.length){tbody.innerHTML='<tr><td colspan="8" style="text-align:center;padding:28px;color:var(--muted)">No orders found.</td></tr>';return;}
  tbody.innerHTML=filtered.map((o,i)=>`
    <tr>
      <td style="font-family:'Space Grotesk';font-size:.75rem;color:var(--gold)">${o.id}</td>
      <td><div style="font-weight:700;font-size:.85rem">${o.name}</div><div style="font-size:.7rem;color:var(--muted2)">${o.state||''}</div></td>
      <td style="font-size:.75rem;color:var(--muted2)">${o.phone||'â€”'}</td>
      <td style="font-family:'Playfair Display';font-weight:900;color:var(--gold-light)">â‚¦${(o.amount||0).toLocaleString('en-NG')}</td>
      <td style="font-size:.75rem"><span class="badge badge-blue">${(o.shipping||'â€”').split('(')[0].trim()}</span></td>
      <td><span class="badge ${o.payment==='Paid'?'badge-green':o.payment==='Pending'?'badge-red':'badge-gold'}">${o.payment||'â€”'}</span></td>
      <td><span class="badge ${getStatusBadge(o.status)}">${o.status||'â€”'}</span></td>
      <td>
        <div style="display:flex;gap:5px;flex-wrap:wrap">
          <button class="act-btn" onclick="openOrderModal(${store.orders.indexOf(o)})">ğŸ‘ï¸ View</button>
          <button class="act-btn del" onclick="deleteOrder(${store.orders.indexOf(o)})">ğŸ—‘ï¸</button>
        </div>
      </td>
    </tr>`).join('');
}

function getStatusBadge(s){
  if(!s)return'badge-gold';
  if(s==='Delivered')return'badge-green';
  if(s==='Shipped'||s==='Arrived in Nigeria')return'badge-blue';
  if(s==='Processing')return'badge-gold';
  return'badge-red';
}

function filterOrders(v){renderOrdersTable(v);}

function deleteOrder(i){
  if(confirm('Delete this order?')){store.orders.splice(i,1);saveStore();renderOrdersTable();renderDashboardStats();showToast('Order deleted.','success');}
}

function openOrderModal(i){
  currentOrderIdx=i;
  const o=store.orders[i];
  document.getElementById('orderDetailContent').innerHTML=`
    <div class="od-meta">
      <div class="od-field"><label>Order ID</label><p style="color:var(--gold-light)">${o.id}</p></div>
      <div class="od-field"><label>Date</label><p>${o.date}</p></div>
      <div class="od-field"><label>Customer</label><p>${o.name}</p></div>
      <div class="od-field"><label>WhatsApp</label><p>${o.phone||'â€”'}</p></div>
      <div class="od-field"><label>State</label><p>${o.state||'â€”'}</p></div>
      <div class="od-field"><label>Amount</label><p style="color:var(--gold-light);font-family:'Playfair Display';font-size:1.1rem;font-weight:900">â‚¦${(o.amount||0).toLocaleString('en-NG')}</p></div>
      <div class="od-field"><label>Shipping Method</label><p>${o.shipping||'â€”'}</p></div>
      <div class="od-field"><label>Payment</label><p><span class="badge ${o.payment==='Paid'?'badge-green':'badge-red'}">${o.payment}</span></p></div>
    </div>
    <div style="background:var(--card2);border:1px solid var(--border);border-radius:9px;padding:14px;margin-top:8px">
      <div style="font-size:.65rem;letter-spacing:.12em;text-transform:uppercase;color:var(--muted);margin-bottom:8px">Items Ordered</div>
      <div style="font-size:.85rem;line-height:1.7">${(o.items||'â€”').replace(/\n/g,'<br>')}</div>
    </div>`;
  document.getElementById('orderStatusUpdate').value=o.status||'Received';
  document.getElementById('orderModal').classList.add('open');
}

function updateOrderStatus(){
  if(currentOrderIdx===null)return;
  store.orders[currentOrderIdx].status=document.getElementById('orderStatusUpdate').value;
  saveStore();renderOrdersTable();closeModal('orderModal');
  showToast('Order status updated!','success');
}

function contactOrderViaWA(){
  if(currentOrderIdx===null)return;
  const o=store.orders[currentOrderIdx];
  const msg=`Hi ${o.name}! This is GGS Global Consult with an update on your order ${o.id}.\n\nStatus: ${o.status}\n\nPlease let us know if you have any questions.`;
  window.open('https://wa.me/'+o.phone.replace(/\D/g,'')+'?text='+encodeURIComponent(msg),'_blank');
}

// ============================================================
// REFERRALS
// ============================================================
function addReferral(){
  const ref={
    name:document.getElementById('rfName').value.trim(),
    phone:document.getElementById('rfPhone').value.trim(),
    count:parseInt(document.getElementById('rfCount').value)||1,
    tier:document.getElementById('rfTier').value,
    reward:document.getElementById('rfReward').value.trim(),
    status:document.getElementById('rfStatus').value,
    date:new Date().toLocaleDateString('en-NG')
  };
  if(!ref.name){showToast('Please enter referrer name.','error');return;}
  store.referrals.unshift(ref);
  saveStore();renderReferralTable();renderDashboardStats();
  showToast('Referral record added!','success');
  ['rfName','rfPhone','rfReward'].forEach(id=>{document.getElementById(id).value='';});
}

function renderReferralTable(){
  const tbody=document.getElementById('referralTable');
  if(!store.referrals.length){tbody.innerHTML='<tr><td colspan="7" style="text-align:center;padding:28px;color:var(--muted)">No referral records yet.</td></tr>';return;}
  tbody.innerHTML=store.referrals.map((r,i)=>`
    <tr>
      <td style="font-weight:700">${r.name}</td>
      <td style="font-size:.78rem;color:var(--muted2)">${r.phone||'â€”'}</td>
      <td style="text-align:center"><strong style="color:var(--gold-light)">${r.count}</strong></td>
      <td><span class="badge badge-gold">${r.tier}</span></td>
      <td style="font-size:.8rem;color:var(--green-light);font-weight:600">${r.reward||'â€”'}</td>
      <td><span class="badge ${r.status==='Paid/Applied'?'badge-green':'badge-gold'}">${r.status}</span></td>
      <td>
        <select onchange="updateRefStatus(${i},this.value)" style="background:var(--card2);border:1px solid var(--border);border-radius:6px;padding:5px 8px;color:var(--white);font-family:'DM Sans';font-size:.72rem;outline:none">
          <option ${r.status==='Pending'?'selected':''}>Pending</option>
          <option ${r.status==='Processing'?'selected':''}>Processing</option>
          <option ${r.status==='Paid/Applied'?'selected':''}>Paid/Applied</option>
        </select>
      </td>
    </tr>`).join('');
}

function updateRefStatus(i,val){
  store.referrals[i].status=val;saveStore();renderReferralTable();showToast('Referral status updated!','success');
}

// ============================================================
// SAVE FUNCTIONS
// ============================================================
function saveAllChanges(){saveStore();showToast('All changes saved!','success');}
function saveShipping(){showToast('Shipping settings saved!','success');}
function saveSettings(){
  const newPass=document.getElementById('setPass').value;
  if(newPass)credentials.password=newPass;
  showToast('Settings saved!','success');
}
function changeCredentials(){
  const u=document.getElementById('newUser').value.trim();
  const p=document.getElementById('newPass').value.trim();
  if(u)credentials.username=u;
  if(p)credentials.password=p;
  showToast('Credentials updated! Remember the new login.','success');
}
function saveCountdown(){showToast('Countdown settings saved!','success');}
function saveTicker(){showToast('Ticker updated!','success');}
function saveBanner(){showToast('Banner updated!','success');}

// ============================================================
// UTILITIES
// ============================================================
function closeModal(id){document.getElementById(id).classList.remove('open');}

function showToast(msg,type='success'){
  const el=document.getElementById('adminToast');
  el.textContent=msg;el.className='admin-toast '+type;
  clearTimeout(el._timer);
  el._timer=setTimeout(()=>{el.className='admin-toast';},3200);
}

// ============================================================
// LIVE CLOCK
// ============================================================
setInterval(updateAdminTime,1000);
</script>
</body>
</html>
